<%= render "layouts/header" %>

<div class="container mt-5">
  <div class='row'>
      <div class='col-sm-3'>
      <h2>User info</h2>
        <table class='table'>
          <tr><%= image_tag @user.get_profile_image(100,100) %></tr>
          <tr>
        	  <th>name</th>
        	  <th><%= @user.name %></th>
          </tr>
          <tr>
        	  <th>introduction</th>
        	  <td><%= @user.introduction %></td>
        	</tr>
        	<tr>
        	  <th><%=link_to"いいねした投稿",favorites_user_path(@user) %></th>
        	</tr>
          <tr>
        	  <th style="min-width: 120px">フォロー数</th>
        	  <td style="text-align: right;">
        	      <%= link_to user_followings_path(@user) do %>
        	    　  <%= @user.followings.count %>
        	      <%- end %>
        	   </td>
          </tr>
        	<tr>
            <th>フォロワー数</th>
              <td style="text-align: right;">
                <%= link_to user_followers_path(@user) do %>
                  <%= @user.followers.count %>
                <%- end %>
              </td>
          </tr>
          </tr>
        </table>
        <% if current_user.following?(@user) %>
          <%= link_to "フォロー外す", user_relationships_path(@user.id), method: :delete %>
        <% else %>
          <%= link_to "フォローする", user_relationships_path(@user.id), method: :post %>
        <% end %>

      <div class='row'>
        <% if @user == current_user %>
          <%= link_to edit_user_path(@user), class: "btn btn-outline-secondary btn-block" do %>
            <i class="fas fa-user-cog"></i>
          <% end %>
        <% end %>
      </div>

    </div><!--col-sm-3-->
    <div class='col-sm-8 offset-md-1'>
      <h2>my朝食</h2>
        <% @posts.each do |post| %>
    <div class="d-inline-flex p-4 bd-highlight ">
      <%= link_to post_path(post.id) do %>
        <p><%= image_tag post.get_image(200,200) %></p>
        <p><%= post.name %></p>
        <p><%= "#{post.post_comments.count} コメント" %></p>
        <p><%= "#{post.favorites.count} よいね" %></p>
      <% end %>
    </div>
  <% end %>

  <div class="row justify-content-center">
      <%= paginate @posts %></p>
  </div>
    </div>
  </div>
</div>

<%= render "layouts/footer" %>